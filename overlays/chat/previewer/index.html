<!DOCTYPE html>
<html>

<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">

	<meta name="theme-color" media="(prefers-color-scheme: light)" content="#cbadff" />
	<meta name="theme-color" media="(prefers-color-scheme: dark)" content="#241f2e" />

	<title>Chat Customization</title>

	<link rel="stylesheet" type="text/css" href="reset.css">
	<link rel="stylesheet" type="text/css" href="fonts.css">

	<link rel="stylesheet" type="text/css" href="coloris.min.css"/>
	<script src="coloris.min.js"></script>
	<script>
		Coloris({
			theme: "polaroid",
			themeMode: "dark",
			alpha: false,
			margin: 4
		});
	</script>

	<link rel="stylesheet" type="text/css" href="main.css">
	<link rel="stylesheet" type="text/css" href="fontawesome-free-6.5.1-web/css/all.min.css">

	<script type="text/javascript" src="jquery-3.7.1.min.js"></script>
</head>

<body>
	<div id="header">
		<div class="cellImportant">
			<h1>TheBlackParrot's Chat Overlay Customization</h1>
		</div>
		<div class="cellImportant" id="accountStuff">
			<div class="button" id="signInButton" style="display: none;"><i class="fa-brands fa-twitch fa-fw"></i> Sign In with Twitch</div>
			<div id="signedInUser" style="display: none;">
				<div id="signedInUser_avatar"></div>
				<div id="signedInUser_avatarOutline"></div>
				<div id="signedInUser_name"></div>
			</div>
		</div>
	</div>

	<div id="wrapper">
		<div class="cell">
			<p>
				This page allows you to customize your chat appearance on streams that use my chat overlay! Changes may not apply if the streamer disables the ability for you to change these settings, this is up to the streamer to allow them or not.
			</p>
			<p>
				Streamers can also ensure custom colors are between set brightness thresholds and various settings will scale relative to what the streamer sets, so what you see here may not <em>quite</em> reflect what actually appears on the overlay.
			</p>
			<p>
				Changes do not push to the database automatically, you must manually press the Save Changes button in each section. They are, however, saved <em>locally</em>. If you want to go back to your previously saved settings, click the <strong>Discard</strong> button for that section.
			</p>
			<p>
				By default, most of these settings will be ignored on the streamer's side. <strong>You must uncheck the <em>"Use default settings"</em> toggles if you want the settings in these sections to take affect.</strong>
			</p>
			<p>
				Once you finish changing settings and want to see them take affect on an already-running stream, use the <strong>!refreshcosettings</strong> command in chat.
			</p>
		</div>
		
		<div class="cell" id="_settings_name">
			<h1><span class="forceOutline">Name Display</span></h1>

			<div class="content preview" style="text-align: center;">
				<div id="namePreview">
					<span id="namePreviewValue">TwitchUser42069</span>
				</div>
			</div>

			<hr/>

			<div class="settings">
				<div class="content settingColumn">
					<div class="setting">
						<div class="settingSingle">
							<input checked id="useDefaultNameSettings" type="checkbox"/> <span class="settingInfo">Use default name settings set by the streamer</span>
						</div>
					</div>
					
					<hr/>

					<div class="setting">
						<div class="settingLabel">Font</div>
						<div class="settingValue">
							<select id="nameFont"></select> <input id="nameItalic" type="checkbox"/> <span class="settingInfo">Italic</span>
						</div>
					</div>
					<div class="setting">
						<div class="settingLabel">Size</div>
						<div class="settingValue">
							<input type="number" id="nameSize" min="14" max="20" step="0.5" value="16" size="6"/><span class="settingCellMeasurement">pt</span>
						</div>
					</div>
					<div class="setting">
						<div class="settingLabel">Character spacing</div>
						<div class="settingValue">
							<input type="number" id="nameCharSpacing" min="-2" max="2" step="0.1" value="1" size="6"/><span class="settingCellMeasurement">px</span>
						</div>
					</div>

					<hr/>

					<div class="setting">
						<div class="settingLabel">Weight</div>
						<div class="settingValue">
							<select id="nameWeight"></select>
						</div>
					</div>
					<div class="setting">
						<div class="settingLabel">Extra weight</div>
						<div class="settingValue">
							<input type="number" id="nameExtraWeight" min="0" max="2.5" step="0.1" value="1.2" size="6"/><span class="settingCellMeasurement">px</span>
						</div>
					</div>

					<hr/>

					<div class="setting">
						<div class="settingLabel">Transform</div>
						<div class="settingValue">
							<select id="nameTransform">
								<option value="none">None</option>
								<option value="lowercase">Lowercase</option>
								<option selected value="uppercase">Uppercase</option>
							</select>
						</div>
					</div>
					<div class="setting">
						<div class="settingLabel">Variant</div>
						<div class="settingValue">
							<select id="nameVariant">
								<option selected value="normal">Normal</option>
								<option value="small-caps">Small Capitals</option>
								<option value="tabular-nums">Tabular Numbers</option>
								<option value="unicase">Unicase</option>
							</select>
						</div>
					</div>
				</div>

				<hr/>

				<div class="content settingColumn">
					<div class="setting">
						<div class="settingLabel">Gradient type</div>
						<div class="settingValue">
							<select id="nameGradientType">
								<option selected value="linear">Linear</option>
								<option value="radial">Radial</option>
								<option value="conic">Conic</option>
							</select>
							<input id="nameGradientRepeats" type="checkbox"/> <span class="settingInfo">Repeat</span>
						</div>
					</div>
					<div class="setting" data-show-for="nameGradientType" data-value-for="linear-gradient conic-gradient">
						<div class="settingLabel">Angle</div>
						<div class="settingValue">
							<input type="number" id="nameGradientAngle" min="-360" max="360" step="1" value="170"/><span class="settingCellMeasurement">deg</span>
						</div>
					</div>
					<div class="setting" data-show-for="nameGradientType" data-value-for="radial-gradient conic-gradient">
						<div class="settingLabel">Position</div>
						<div class="settingValue">
							<span class="settingCellMeasurement">X</span> <input type="number" id="nameGradientXPos" min="-500" max="500" step="1" value="50" size="6"/><span class="settingCellMeasurement">%</span>
							<div class="settingValueSection" style="margin-bottom: 0px;">
								<span class="settingCellMeasurement">Y</span> <input type="number" id="nameGradientYPos" min="-500" max="500" step="1" value="50" size="6"/><span class="settingCellMeasurement">%</span>
							</div>
						</div>
					</div>
				</div>

				<hr/>

				<div class="content settingColumn">
					<div class="setting">
						<div class="settingLabel">Color stops</div>
						<div class="settingValue">
							<input type="number" id="nameColorStops" min="1" max="9" step="1" value="2" size="6"/>
						</div>
					</div>

					<div class="setting" data-multi-slot-list="nameColorStops" data-multi-slot="1">
						<div class="settingLabel">Stop 1</div>
						<div class="settingValue">
							<input type="text" id="nameColorStop1_color" data-coloris value="#ffffff"/> <span class="settingCellMeasurement">@</span>
							<input type="number" id="nameColorStop1_percentage" min="-50" max="150" step="0.1" value="0" size="8"/><span class="settingCellMeasurement">%</span>
						</div>
					</div>
					<div class="setting" data-multi-slot-list="nameColorStops" data-multi-slot="2">
						<div class="settingLabel">Stop 2</div>
						<div class="settingValue">
							<input type="text" id="nameColorStop2_color" data-coloris value="#cbadff"/> <span class="settingCellMeasurement">@</span>
							<input type="number" id="nameColorStop2_percentage" min="-50" max="150" step="0.1" value="75" size="8"/><span class="settingCellMeasurement">%</span>
							<div class="settingValueSection">
								<input id="nameColorStop2_isHard" type="checkbox"/> <span class="settingInfo">Hard stop</span>
							</div>
						</div>
					</div>
					<div class="setting" data-multi-slot-list="nameColorStops" data-multi-slot="3">
						<div class="settingLabel">Stop 3</div>
						<div class="settingValue">
							<input type="text" id="nameColorStop3_color" data-coloris value="#ffffff"/> <span class="settingCellMeasurement">@</span>
							<input type="number" id="nameColorStop3_percentage" min="-50" max="150" step="0.1" value="100" size="8"/><span class="settingCellMeasurement">%</span>
							<div class="settingValueSection">
								<input id="nameColorStop3_isHard" type="checkbox"/> <span class="settingInfo">Hard stop</span>
							</div>
						</div>
					</div>
					<div class="setting" data-multi-slot-list="nameColorStops" data-multi-slot="4">
						<div class="settingLabel">Stop 4</div>
						<div class="settingValue">
							<input type="text" id="nameColorStop4_color" data-coloris value="#ffffff"/> <span class="settingCellMeasurement">@</span>
							<input type="number" id="nameColorStop4_percentage" min="-50" max="150" step="0.1" value="100" size="8"/><span class="settingCellMeasurement">%</span>
							<div class="settingValueSection">
								<input id="nameColorStop4_isHard" type="checkbox"/> <span class="settingInfo">Hard stop</span>
							</div>
						</div>
					</div>
					<div class="setting" data-multi-slot-list="nameColorStops" data-multi-slot="5">
						<div class="settingLabel">Stop 5</div>
						<div class="settingValue">
							<input type="text" id="nameColorStop5_color" data-coloris value="#ffffff"/> <span class="settingCellMeasurement">@</span>
							<input type="number" id="nameColorStop5_percentage" min="-50" max="150" step="0.1" value="100" size="8"/><span class="settingCellMeasurement">%</span>
							<div class="settingValueSection">
								<input id="nameColorStop5_isHard" type="checkbox"/> <span class="settingInfo">Hard stop</span>
							</div>
						</div>
					</div>
					<div class="setting" data-multi-slot-list="nameColorStops" data-multi-slot="6">
						<div class="settingLabel">Stop 6</div>
						<div class="settingValue">
							<input type="text" id="nameColorStop6_color" data-coloris value="#ffffff"/> <span class="settingCellMeasurement">@</span>
							<input type="number" id="nameColorStop6_percentage" min="-50" max="150" step="0.1" value="100" size="8"/><span class="settingCellMeasurement">%</span>
							<div class="settingValueSection">
								<input id="nameColorStop6_isHard" type="checkbox"/> <span class="settingInfo">Hard stop</span>
							</div>
						</div>
					</div>
					<div class="setting" data-multi-slot-list="nameColorStops" data-multi-slot="7">
						<div class="settingLabel">Stop 7</div>
						<div class="settingValue">
							<input type="text" id="nameColorStop7_color" data-coloris value="#ffffff"/> <span class="settingCellMeasurement">@</span>
							<input type="number" id="nameColorStop7_percentage" min="-50" max="150" step="0.1" value="100" size="8"/><span class="settingCellMeasurement">%</span>
							<div class="settingValueSection">
								<input id="nameColorStop7_isHard" type="checkbox"/> <span class="settingInfo">Hard stop</span>
							</div>
						</div>
					</div>
					<div class="setting" data-multi-slot-list="nameColorStops" data-multi-slot="8">
						<div class="settingLabel">Stop 8</div>
						<div class="settingValue">
							<input type="text" id="nameColorStop8_color" data-coloris value="#ffffff"/> <span class="settingCellMeasurement">@</span>
							<input type="number" id="nameColorStop8_percentage" min="-50" max="150" step="0.1" value="100" size="8"/><span class="settingCellMeasurement">%</span>
							<div class="settingValueSection">
								<input id="nameColorStop8_isHard" type="checkbox"/> <span class="settingInfo">Hard stop</span>
							</div>
						</div>
					</div>
					<div class="setting" data-multi-slot-list="nameColorStops" data-multi-slot="9">
						<div class="settingLabel">Stop 9</div>
						<div class="settingValue">
							<input type="text" id="nameColorStop9_color" data-coloris value="#ffffff"/> <span class="settingCellMeasurement">@</span>
							<input type="number" id="nameColorStop9_percentage" min="-50" max="150" step="0.1" value="100" size="8"/><span class="settingCellMeasurement">%</span>
							<div class="settingValueSection">
								<input id="nameColorStop9_isHard" type="checkbox"/> <span class="settingInfo">Hard stop</span>
							</div>
						</div>
					</div>
				</div>

				<hr/>

				<div class="content settingColumn">
					<div class="setting">
						<div class="settingLabel">Perspective shift</div>
						<div class="settingValue">
							<input type="number" id="namePerspectiveShift" min="-30" max="30" step="1" value="0" size="6"/>
						</div>
					</div>
					<div class="setting">
						<div class="settingLabel">Skew</div>
						<div class="settingValue">
							<input type="number" id="nameSkew" min="-25" max="25" step="0.5" value="0" size="6"/><span class="settingCellMeasurement">deg</span>
						</div>
					</div>
				</div>

				<hr/>

				<div class="content settingColumn">
					<div class="setting">
						<div class="settingSingle">
							<input id="nameGlowEnabled" type="checkbox"/> <span class="settingInfo">Render an extra shadow/glow</span>
						</div>
					</div>
					<div class="setting">
						<div class="settingLabel">Color</div>
						<div class="settingValue">
							<input type="text" id="nameGlowColor" data-coloris data-enable-alpha value="#ffffffff"/>
						</div>
					</div>
					<div class="setting">
						<div class="settingLabel">Blur amount</div>
						<div class="settingValue">
							<input type="number" id="nameGlowAmount" min="0" max="4" step="1" value="2" size="6"/><span class="settingCellMeasurement">px</span>
						</div>
					</div>
				</div>				
			</div>

			<div class="footer" style="display: none;">
				<div class="cellImportant" data-buttons-affect="name">
					<div class="button saveButton"><i class="fa-fw fa-solid fa-floppy-disk"></i> Save</div>
					<div class="button discardButton"><i class="fa-fw fa-solid fa-trash-can"></i> Discard</div>
				</div>
			</div>
		</div>
		
		<div class="cell" id="_settings_message">

			<h1><span class="forceOutline">Message Display</span></h1>

			<div class="content preview" style="text-align: left;">
				<div id="messagePreview">The quick brown foxes (of which there are 1,234 clones) jumped over approximately 567,890 "lazy" dogs (in total) across the span of their lifetimes. <strong>That's quite a lot!</strong> I think? <em>/shrug</em></div>
			</div>

			<hr/>

			<div class="settings">
				<div class="content settingColumn">
					<div class="setting">
						<div class="settingSingle">
							<input checked id="useDefaultMessageSettings" type="checkbox"/> <span class="settingInfo">Use default message settings set by the streamer</span>
						</div>
					</div>
					
					<hr/>

					<div class="setting">
						<div class="settingLabel">Font</div>
						<div class="settingValue">
							<select id="messageFont"></select>
						</div>
					</div>
					<div class="setting">
						<div class="settingLabel">Size</div>
						<div class="settingValue">
							<input type="number" id="messageSize" min="13" max="18" step="0.5" value="15" size="6"/><span class="settingCellMeasurement">pt</span>
						</div>
					</div>
					<div class="setting">
						<div class="settingLabel">Character spacing</div>
						<div class="settingValue">
							<input type="number" id="messageCharSpacing" min="-1" max="1" step="0.1" value="0" size="6"/><span class="settingCellMeasurement">px</span>
						</div>
					</div>
					<div class="setting">
						<div class="settingLabel">Line height</div>
						<div class="settingValue">
							<input type="number" id="messageLineHeight" min="20" max="30" step="1" value="24" size="6"/><span class="settingCellMeasurement">px</span>
						</div>
					</div>

					<hr/>

					<div class="setting">
						<div class="settingLabel">Weight</div>
						<div class="settingValue">
							<select id="messageWeight"></select>
						</div>
					</div>
					<div class="setting">
						<div class="settingLabel">Extra weight</div>
						<div class="settingValue">
							<input type="number" id="messageExtraWeight" min="0" max="1" step="0.1" value="0" size="6"/><span class="settingCellMeasurement">px</span>
						</div>
					</div>
					<div class="setting">
						<div class="settingLabel">Extra weight (Bold)</div>
						<div class="settingValue">
							<input type="number" id="messageBoldExtraWeight" min="0.7" max="2" step="0.1" value="1.2" size="6"/><span class="settingCellMeasurement">px</span>
						</div>
					</div>

					<hr/>

					<div class="setting">
						<div class="settingLabel">Variant</div>
						<div class="settingValue">
							<select id="messageVariant">
								<option selected value="normal">Normal</option>
								<option value="tabular-nums">Tabular Numbers</option>
							</select>
						</div>
					</div>
				</div>
			</div>

			<div class="footer" style="display: none;">
				<div class="cellImportant" data-buttons-affect="message">
					<div class="button saveButton"><i class="fa-fw fa-solid fa-floppy-disk"></i> Save</div>
					<div class="button discardButton"><i class="fa-fw fa-solid fa-trash-can"></i> Discard</div>
				</div>
			</div>
		</div>

		<div class="cell" id="_settings_flags">

			<h1><span class="forceOutline">Identity Flags</span></h1>

			<div class="settings">
				<div class="content settingColumn">
					<div id="identityFlags">
					</div>
				</div>
			</div>

			<div class="footer" style="display: none;">
				<div class="cellImportant" data-buttons-affect="flags">
					<div class="button saveButton"><i class="fa-fw fa-solid fa-floppy-disk"></i> Save</div>
					<div class="button discardButton"><i class="fa-fw fa-solid fa-trash-can"></i> Discard</div>
				</div>
			</div>
		</div>

		<div class="cell" id="_settings_misc">

			<h1><span class="forceOutline">Miscellaneous</span></h1>

			<div class="settings">
				<div class="content settingColumn">
					<div class="setting">
						<div class="settingSingle">
							<input id="hideBTTVBadge" type="checkbox"/> <span class="settingInfo">Hide BetterTTV badge</span>
						</div>
					</div>
					<hr/>
					<div class="setting">
						<div class="settingSingle">
							<input id="hideFFZBadge" type="checkbox"/> <span class="settingInfo">Hide FrankerFaceZ badge</span>
						</div>
					</div>
					<hr/>
					<div class="setting">
						<div class="settingSingle">
							<input id="hide7TVBadge" type="checkbox"/> <span class="settingInfo">Hide 7TV badge</span>
						</div>
					</div>
					<div class="setting">
						<div class="settingSingle">
							<input checked id="use7TVPaint" type="checkbox"/> <span class="settingInfo">Override name gradient with selected 7TV paint</span>
						</div>
					</div>
				</div>

				<hr/>

				<div class="content settingColumn">
					<div class="setting">
						<div class="settingSingle">
							<input id="useUsername" type="checkbox"/> <span class="settingInfo">Use your username as the primary name instead of the display name</span>
						</div>
					</div>
				</div>

				<hr/>

				<div class="content settingColumn">
					<div class="setting" style="justify-content: center; align-items: center; margin-bottom: var(--global-spacing);">
						<div class="settingSingle">
							<div id="avatarPreview"></div>
						</div>
					</div>

					<hr/>
					
					<div class="setting">
						<div class="settingSingle">
							<input checked id="showAvatar" type="checkbox"/> <span class="settingInfo">Show your avatar / profile picture (if permitted)</span>
						</div>
					</div>

					<hr/>

					<div class="setting">
						<div class="settingSingle">
							<input checked id="useDefaultAvatarBorderRadius" type="checkbox"/> <span class="settingInfo">Use the default avatar border radius set by the streamer</span>
						</div>
					</div>
					<div class="setting">
						<div class="settingLabel">Border radius</div>
						<div class="settingValue">
							<input type="number" id="avatarBorderRadius" min="0" max="50" step="1" value="50" size="6"/><span class="settingCellMeasurement">%</span>
						</div>
					</div>
				</div>

				<hr/>		

				<div class="content settingColumn">
					<p>Pronouns are fetched from <a href="https://pr.alejo.io">Twitch Chat Pronouns</a>. You'll set those over on their service.</p>
				</div>
			</div>

			<div class="footer" style="display: none;">
				<div class="cellImportant" data-buttons-affect="misc">
					<div class="button saveButton"><i class="fa-fw fa-solid fa-floppy-disk"></i> Save</div>
					<div class="button discardButton"><i class="fa-fw fa-solid fa-trash-can"></i> Discard</div>
				</div>
			</div>
		</div>
	</div>

	<div id="loader">
		<div id="spinner">
		</div>
	</div>

	<div id="notifications">
	</div>

	<div id="filterWrapper">
		<svg xmlns="http://www.w3.org/2000/svg">
			<filter id="outlineEffect" color-interpolation-filters="sRGB">
				<feConvolveMatrix in="SourceAlpha" result="OutlineAlpha" divisor="4" order="5,5" kernelMatrix="0 1 1 1 0 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 0 1 1 1 0"/>
				<feFlood flood-color="#000000" result="OutlineColor" />
				<feComposite in="OutlineColor" in2="OutlineAlpha" operator="in" result="Outline" />

				<feMerge>
					<feMergeNode in="Outline"/>
					<feMergeNode in="SourceGraphic"/>
				</feMerge>
			</filter>

			<filter id="shadowEffect" color-interpolation-filters="sRGB">
				<feDropShadow dx="0" dy="1" stdDeviation="2" flood-color="#000000"/>
			</filter>
			<filter id="blankEffect"></filter>
		</svg>
	</div>

	<script defer type="text/javascript" src="funcs.js"></script>
	<script defer type="text/javascript" src="settings.js"></script>
	<script defer type="text/javascript" src="main.js"></script>
</body>


</html>